---
title: 'TCP vs UDP'
date: 2020-07-12
categories:
 - 计算机网络
tags:
 - 计算机网络
---

## TCP
当一台计算机想要与另一台计算机通信时，两台计算机之间的通信需要流畅且可靠，这样才能正确的收发数据。
例如，当你想查看网页时，希望看到的是一个完整且有序的页面，而不是一个残缺且内容混乱的页面，这就
需要使用TCP来保证传输的可靠性。

TCP协议的全称是**传输控制协议**，是一种面向连接的、可靠的、基于字节流的**传输层**通信协议。

### 特点
- 面向连接

- 仅支持单播传输

    每条TCP传输连接只能有两个端点，只能进行点对点的数据传输，不支持多播和广播传输方式。

- 面向字节流

- 可靠传输

- 提供拥塞机制

    当网络出现拥塞的时候，TCP能够减小向网络注入数据的速率和数量，缓解拥塞。

- 提供全双工通信

    TCP允许通信双方的应用程序在任何时候都能发送数据，因为TCP连接的两端都设有缓存，用来临时存放双向通信的数据。当然，TCP可以立即发送一个数据段，也可以缓存一段时间以便一次发送更多的数据段（最大的数据段大小取决于MSS）。

## UDP
UDP协议的全称是**用户数据报协议**，是一种无连接、不可靠的协议，与TCP同为传输层协议。

UDP不提供数据包分组、组装，且不能对数据包进行排序，也就是说，当数据包发送后，无法得知它是否安全完整地到达。

### 特点
- 面向无连接

    UDP在传输时不需要进行三次握手，也不会对数据报文进行任何拆分和拼接操作。

    在发送端，应用层将数据传递给传输层的UDP协议，UDP只会给数据增加一个UDP头，用以标识这是一个UDP协议的数据包，
    然后就传递给网络层了。

    在接收端，网络层将数据传递给传输层后，UDP只去除IP报文头就传递给了应用层，不会进行拼接操作。

- 有单播、多播、广播的功能

- 面向报文

- 不可靠

- 头部开销小，传输效率高

## TCP与UDP的区别
1. TCP是面向连接的，可靠性高；UDP是基于非连接的，可靠性低

2. 由于TCP是连接的通信，需要通过三次握手、重新确认等连接过程，会有延时，实时性差，且过程复杂，易被攻击；UDP不需要建立连接，因而实时性较强（快），也较为安全

3. 由于TCP的报头比UDP复杂，因此在传输相同大小的数据时，TCP的开销较大，首部开销20字节，实际包含的用户数据较少，而UDP首部开销仅8个字节。但也因为TCP在IP协议的基础上增加了确认机制、重传机制等，保证了传输的可靠性，不会出现丢包或乱序，而UDP提供的是一种“尽力而为”的传输，可能会出现丢包等现象

4. 每条TCP连接只能是点到点的，而UDP支持一对一、一对多、多对一、多对多的交互通信

## 应用场景选择
- 对于实时性要求较高和高速传输的场景下使用UDP

- 在可靠性要求低，追求效率的情况下使用UDP

- 需要传输大量数据，且对可靠性要求较高的情况下使用TCP

## 总结
|            | TCP                                    | UDP                          |
| ---------- | -------------------------------------- | ---------------------------- |
| 是否连接   | 面向连接                               | 面向非链接                   |
| 传输可靠性 | 可靠                                   | 不可靠                       |
| 应用场合   | 适用于要求可靠传输的应用，如文件传输等 | 适用于实时应用，如视屏会议等 |
| 速度       | 慢                                     | 快                           |
| 首部开销   | 首部最小20字节，最大60字节             | 首部开销小，仅8字节          |
| 传输方式   | 面向字节流                             | 面向报文                     |